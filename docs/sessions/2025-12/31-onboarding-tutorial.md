# Session: Onboarding Tutorial æ–°æ‰‹æ•™å­¸

**Date**: 2025-12-31
**Status**: Planning
**Issue**: N/A
**Contributors**: KiddC, Claude AI
**Branch**: main
**Tags**: #ux, #onboarding, #tutorial, #driver.js

**Categories**: UX, Onboarding, User Experience

---

## Overview

### Goal
ç‚ºå®Œå…¨æ–°æ‰‹ç”¨æˆ¶å»ºç«‹é¦–æ¬¡ç™»å…¥å¼•å°æ•™å­¸ï¼Œå¹«åŠ©ä»–å€‘å¿«é€Ÿäº†è§£ HoldYourBeer çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

### Target Users
- å®Œå…¨æ–°æ‰‹ï¼ˆå¾æœªä½¿ç”¨éæ­¤ Appï¼‰

### Trigger
- é¦–æ¬¡ç™»å…¥æ™‚è‡ªå‹•è§¸ç™¼

### Related Documents
- **Dashboard**: `resources/views/dashboard.blade.php`
- **Beer Creation**: `resources/views/beers/create.blade.php`
- **Charts**: `resources/views/charts/index.blade.php`

---

## Context

### æ•™å­¸å…§å®¹ç¯„åœ

| æ­¥é©Ÿ | é é¢ | æ•™å­¸é‡é» |
|------|------|----------|
| 1-3 | Dashboard | å•¤é…’åˆ—è¡¨ã€æ–°å¢æŒ‰éˆ•ã€è¨ˆæ•¸å™¨æ“ä½œ |
| 4-6 | Charts | åœ–è¡¨é¡å‹ã€è³‡æ–™èªªæ˜ã€æ™‚é–“ç¯©é¸ |

### ç”¨æˆ¶æµç¨‹

```
é¦–æ¬¡ç™»å…¥
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¡è¿ Modal                         â”‚
â”‚  "æ­¡è¿ä½¿ç”¨ HoldYourBeerï¼           â”‚
â”‚   è¦çœ‹å¿«é€Ÿå°è¦½å—ï¼Ÿ"                 â”‚
â”‚                                     â”‚
â”‚  [é–‹å§‹å°è¦½]  [ç¨å¾Œå†èªª]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ é»ã€Œé–‹å§‹å°è¦½ã€

=== Dashboard é é¢ ===
Step 1: å•¤é…’æ”¶è—åˆ—è¡¨
        "é€™æ˜¯ä½ çš„å•¤é…’æ”¶è—ï¼Œæœƒé¡¯ç¤ºä½ è¿½è¹¤çš„æ‰€æœ‰å•¤é…’"

Step 2: æ–°å¢æŒ‰éˆ•
        "é»é€™è£¡å¯ä»¥æ–°å¢ä¸€æ¬¾å•¤é…’åˆ°ä½ çš„æ”¶è—"

Step 3: è¨ˆæ•¸å™¨
        "ç”¨ +/- æŒ‰éˆ•è¨˜éŒ„ä½ å–äº†å¹¾æ¯"

    â†“ è‡ªå‹•è·³è½‰åˆ° Charts é é¢

=== Charts é é¢ ===
Step 4: åœ–è¡¨å€åŸŸ
        "é€™è£¡å¯ä»¥æŸ¥çœ‹ä½ çš„é£²é…’çµ±è¨ˆ"

Step 5: åœ–è¡¨é¡å‹åˆ‡æ›
        "åˆ‡æ›ä¸åŒçš„çµ±è¨ˆåœ–è¡¨ï¼šæ¯æ—¥/æ¯é€±/å“ç‰Œåˆ†å¸ƒç­‰"

Step 6: æ™‚é–“ç¯©é¸å™¨
        "é¸æ“‡è¦æŸ¥çœ‹çš„æ™‚é–“ç¯„åœ"

    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®Œæˆ Modal                         â”‚
â”‚  "å°è¦½å®Œæˆï¼é–‹å§‹è¨˜éŒ„ä½ çš„å•¤é…’å§ ğŸº"  â”‚
â”‚                                     â”‚
â”‚  [é–‹å§‹ä½¿ç”¨]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã€Œé‡æ–°çœ‹æ•™å­¸ã€èˆ‡ã€Œç¨å¾Œå†èªªã€æµç¨‹

```
ç”¨æˆ¶ç™»å…¥
    â†“
æª¢æŸ¥ onboarding_completed_at
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æƒ…å¢ƒ 1: onboarding_completed_at = null      â”‚
â”‚ ï¼ˆå¾æœªå®Œæˆå°è¦½ï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
é¡¯ç¤ºæ­¡è¿ Modal
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é»ã€Œé–‹å§‹å°è¦½ã€  â”‚  é»ã€Œç¨å¾Œå†èªªã€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                       â†“
å•Ÿå‹• Driver.js          é—œé–‰ Modal
    â†“                       â†“
å®Œæˆå°è¦½                ä¸æ›´æ–°è³‡æ–™åº«
    â†“                       â†“
æ›´æ–° onboarding_        ä¸‹æ¬¡ç™»å…¥å†å•
completed_at = now()


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æƒ…å¢ƒ 2: onboarding_completed_at != null     â”‚
â”‚ ï¼ˆå·²å®Œæˆå°è¦½ï¼‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
æª¢æŸ¥ email_verified_at
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email_verified_at + 30 å¤© > now()           â”‚
â”‚ ï¼ˆé©—è­‰å¾Œ 30 å¤©å…§ï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
åœ¨ Navigation é¡¯ç¤ºã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•
    â†“
é»æ“ŠæŒ‰éˆ•
    â†“
æ¸…é™¤ onboarding_completed_at = null
    â†“
è·³è½‰åˆ° Dashboard
    â†“
è‡ªå‹•å•Ÿå‹•å°è¦½


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email_verified_at + 30 å¤© <= now()          â”‚
â”‚ ï¼ˆé©—è­‰å¾Œè¶…é 30 å¤©ï¼‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ä¸é¡¯ç¤ºã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•
```

---

## Planning

### æŠ€è¡“é¸å‹

| é …ç›® | æ–¹æ¡ˆ | èªªæ˜ |
|------|------|------|
| **JS åº«** | Driver.js | è¼•é‡ (~5KB)ã€ç„¡ä¾è³´ã€æ”¯æ´ highlight + tooltip |
| **é¦–æ¬¡åˆ¤æ–·** | `users.onboarding_completed_at` | è³‡æ–™åº«æ¬„ä½è¨˜éŒ„å®Œæˆæ™‚é–“ |
| **è·¨é å°è¦½** | localStorage | è¨˜éŒ„ç›®å‰æ­¥é©Ÿï¼Œæ›é å¾Œç¹¼çºŒ |
| **èªç³»æ”¯æ´** | Laravel i18n | æ”¯æ´ en / zh-TW |

### Driver.js é¸æ“‡åŸå› 

| æ¯”è¼ƒé …ç›® | Driver.js | Intro.js | Shepherd.js |
|----------|-----------|----------|-------------|
| å¤§å° | ~5KB | ~20KB | ~30KB |
| ä¾è³´ | ç„¡ | ç„¡ | Popper.js |
| æˆæ¬Š | MIT | AGPL (å•†ç”¨éœ€ä»˜è²») | MIT |
| ç¶­è­· | æ´»èº | æ´»èº | æ´»èº |

### è³‡æ–™åº«è®Šæ›´

```php
// Migration: add_onboarding_completed_at_to_users_table
Schema::table('users', function (Blueprint $table) {
    $table->timestamp('onboarding_completed_at')->nullable()->after('remember_token');
});
```

### å¾…ç¢ºèªå•é¡Œ

| å•é¡Œ | æ±ºå®š |
|------|------|
| å°è¦½å®Œæˆå¾Œï¼Œè¦ä¸è¦æ”¾ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•ï¼Ÿ | âœ… **è¦**ï¼Œæä¾›é‡æ–°è§€çœ‹åŠŸèƒ½ |
| æŒ‰éˆ•ä½ç½®ï¼ˆProfile / Navigation / Help é é¢ï¼‰ï¼Ÿ | âœ… **Navigation**ï¼ˆä¸»å°è¦½åˆ—ï¼‰ |
| ç”¨æˆ¶é»ã€Œç¨å¾Œå†èªªã€å¾Œï¼Œä¸‹æ¬¡ç™»å…¥é‚„è¦å†å•å—ï¼Ÿ | âœ… **è¦**ï¼ŒæŒçºŒæé†’ç›´åˆ°å®Œæˆå°è¦½ |

### æ–°å¢éœ€æ±‚

| éœ€æ±‚ | èªªæ˜ |
|------|------|
| **æŒ‰éˆ•é¡¯ç¤ºé‚è¼¯** | ä¿¡ç®±é©—è­‰å¾Œä¸€å€‹æœˆå…§é¡¯ç¤ºã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ• |
| **è¨ˆç®—æ–¹å¼** | `email_verified_at + 30 å¤© > now()` |
| **éš±è—æ¢ä»¶** | è¶…é 30 å¤©å¾Œè‡ªå‹•éš±è—æŒ‰éˆ• |

---

## Implementation Checklist

### Phase 1: åŸºç¤å»ºè¨­
- [x] å®‰è£ Driver.js (`npm install driver.js`) - å·²æ›´æ–° package.json
- [x] å»ºç«‹ Migrationï¼š`onboarding_completed_at` æ¬„ä½
- [ ] åŸ·è¡Œ Migrationï¼ˆéœ€è¦ Docker ç’°å¢ƒï¼‰

### Phase 2: æ­¡è¿ Modal
- [x] å»ºç«‹ `OnboardingModal` Livewire å…ƒä»¶
- [x] å¯¦ä½œã€Œé–‹å§‹å°è¦½ã€/ã€Œç¨å¾Œå†èªªã€é‚è¼¯
- [x] **å¯¦ä½œã€Œç¨å¾Œå†èªªã€æŒçºŒæé†’æ©Ÿåˆ¶**
  - [x] é»æ“Šã€Œç¨å¾Œå†èªªã€æ™‚ä¸æ›´æ–° `onboarding_completed_at`
  - [x] ä¸‹æ¬¡ç™»å…¥æ™‚å†æ¬¡é¡¯ç¤ºæ­¡è¿ Modal
- [x] æ•´åˆåˆ° Dashboard é é¢ï¼ˆé¦–æ¬¡ç™»å…¥æ™‚é¡¯ç¤ºï¼‰

### Phase 3: Dashboard å°è¦½ (Step 1-3)
- [x] è¨­å®š Driver.js æ­¥é©Ÿé…ç½®
- [x] Step 1: Highlight å•¤é…’åˆ—è¡¨å€åŸŸ (#beer-list)
- [x] Step 2: Highlight æ–°å¢æŒ‰éˆ• (#add-beer-button)
- [x] Step 3: Highlight è¨ˆæ•¸å™¨ (+/- æŒ‰éˆ•) (.beer-counter)
- [x] å°è¦½çµæŸå¾Œè·³è½‰åˆ° Charts

### Phase 4: Charts å°è¦½ (Step 4-6)
- [x] åµæ¸¬ localStorage ç¹¼çºŒå°è¦½
- [x] Step 4: Highlight åœ–è¡¨å€åŸŸ (#chart-container)
- [x] Step 5: Highlight åœ–è¡¨é¡å‹åˆ‡æ› (#chart-type-selector)
- [x] Step 6: Highlight æ™‚é–“ç¯©é¸å™¨ (#time-filter)
- [x] é¡¯ç¤ºå®Œæˆ Modal

### Phase 5: å®Œæˆè™•ç†
- [x] æ›´æ–° `onboarding_completed_at` æ¬„ä½
- [x] æ¸…é™¤ localStorage å°è¦½ç‹€æ…‹
- [x] è·³è½‰å› Dashboard

### Phase 6: ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•
- [x] **åœ¨ Navigation åŠ å…¥ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•**
- [x] **å¯¦ä½œé¡¯ç¤ºé‚è¼¯**ï¼š
  - [x] æª¢æŸ¥ `email_verified_at` æ˜¯å¦å­˜åœ¨
  - [x] è¨ˆç®—æ˜¯å¦åœ¨é©—è­‰å¾Œ 30 å¤©å…§ï¼š`email_verified_at + 30 å¤© > now()`
  - [x] è¶…é 30 å¤©å¾Œè‡ªå‹•éš±è—æŒ‰éˆ•
- [x] **é»æ“ŠæŒ‰éˆ•æ™‚**ï¼š
  - [x] æ¸…é™¤ `onboarding_completed_at`ï¼ˆè¨­ç‚º nullï¼‰
  - [x] é‡æ–°å•Ÿå‹•å°è¦½æµç¨‹
  - [x] è·³è½‰åˆ° Dashboard
- [x] **åŠ å…¥ OnboardingController å’Œè·¯ç”±**

### Phase 7: å¤šèªç³»
- [x] æ–°å¢ en ç¿»è­¯
- [x] æ–°å¢ zh-TW ç¿»è­¯
- [x] **æ–°å¢ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•ç¿»è­¯**

### Phase 8: æ¸¬è©¦
- [ ] æ–°ç”¨æˆ¶é¦–æ¬¡ç™»å…¥æµç¨‹
- [ ] **ã€Œç¨å¾Œå†èªªã€æµç¨‹**
  - [ ] é©—è­‰ä¸‹æ¬¡ç™»å…¥æ™‚å†æ¬¡é¡¯ç¤º Modal
  - [ ] é©—è­‰ `onboarding_completed_at` ä¿æŒç‚º null
- [ ] è·¨é å°è¦½ï¼ˆDashboard â†’ Chartsï¼‰
- [ ] **ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•æ¸¬è©¦**
  - [ ] é©—è­‰åœ¨ 30 å¤©å…§é¡¯ç¤º
  - [ ] é©—è­‰è¶…é 30 å¤©å¾Œéš±è—
  - [ ] é©—è­‰é»æ“Šå¾Œé‡æ–°å•Ÿå‹•å°è¦½
- [ ] å¤šèªç³»åˆ‡æ›
- [ ] è¡Œå‹•è£ç½® RWD

---

## File Structure (é è¨ˆ)

```
resources/
â”œâ”€â”€ js/
â”‚   â””â”€â”€ onboarding.js              # Driver.js é…ç½®
â”œâ”€â”€ views/
â”‚   â””â”€â”€ livewire/
â”‚       â””â”€â”€ onboarding-modal.blade.php
app/
â”œâ”€â”€ Livewire/
â”‚   â””â”€â”€ OnboardingModal.php
database/
â””â”€â”€ migrations/
    â””â”€â”€ xxxx_add_onboarding_completed_at_to_users_table.php
lang/
â”œâ”€â”€ en.json                        # æ–°å¢ onboarding ç›¸é—œç¿»è­¯
â””â”€â”€ zh-TW.json
```

---

## æŠ€è¡“å¯¦ä½œç´°ç¯€

### ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•é‚è¼¯

#### 1. é¡¯ç¤ºæ¢ä»¶

```php
// åœ¨ Navigation Blade ä¸­
@if(Auth::check() && 
    Auth::user()->email_verified_at && 
    Auth::user()->email_verified_at->addDays(30)->isFuture())
    <a href="{{ route('onboarding.restart') }}" class="...">
        {{ __('é‡æ–°çœ‹æ•™å­¸') }}
    </a>
@endif
```

**é‚è¼¯èªªæ˜**ï¼š
- âœ… ç”¨æˆ¶å·²ç™»å…¥
- âœ… `email_verified_at` ä¸ç‚º nullï¼ˆå·²é©—è­‰ä¿¡ç®±ï¼‰
- âœ… é©—è­‰æ—¥æœŸ + 30 å¤© > ç¾åœ¨æ™‚é–“

#### 2. é‡æ–°å•Ÿå‹•å°è¦½

```php
// OnboardingController.php
public function restart()
{
    Auth::user()->update([
        'onboarding_completed_at' => null
    ]);
    
    return redirect()->route('dashboard')
        ->with('restart_onboarding', true);
}
```

**æµç¨‹**ï¼š
1. æ¸…é™¤ `onboarding_completed_at` æ¬„ä½ï¼ˆè¨­ç‚º nullï¼‰
2. è·³è½‰åˆ° Dashboard
3. å‰ç«¯åµæ¸¬ `restart_onboarding` sessionï¼Œè‡ªå‹•å•Ÿå‹•å°è¦½

#### 3. ã€Œç¨å¾Œå†èªªã€æŒçºŒæé†’

```php
// OnboardingModal.php (Livewire)
public function skipOnboarding()
{
    // ä¸æ›´æ–° onboarding_completed_at
    // åªé—œé–‰ Modal
    $this->dispatch('close-modal');
}

public function startOnboarding()
{
    // å•Ÿå‹•å°è¦½
    $this->dispatch('start-driver-tour');
}
```

**é‚è¼¯èªªæ˜**ï¼š
- é»ã€Œç¨å¾Œå†èªªã€ï¼šä¸æ›´æ–°è³‡æ–™åº«ï¼Œ`onboarding_completed_at` ä¿æŒ `null`
- ä¸‹æ¬¡ç™»å…¥æ™‚ï¼šæª¢æŸ¥ `onboarding_completed_at === null`ï¼Œå†æ¬¡é¡¯ç¤º Modal
- å®Œæˆå°è¦½ï¼šæ‰æ›´æ–° `onboarding_completed_at = now()`

---

## UI/UX è¨­è¨ˆ

### æ­¡è¿ Modal è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸº                     â”‚
â”‚                                        â”‚
â”‚      æ­¡è¿ä½¿ç”¨ HoldYourBeerï¼           â”‚
â”‚                                        â”‚
â”‚   æƒ³è¦å¿«é€Ÿäº†è§£å¦‚ä½•ä½¿ç”¨å—ï¼Ÿ              â”‚
â”‚   åªéœ€è¦ 1 åˆ†é˜ï¼                       â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é–‹å§‹å°è¦½    â”‚  â”‚  ç¨å¾Œå†èªª    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Driver.js Tooltip æ¨£å¼

- èƒŒæ™¯ï¼šç™½è‰² + é™°å½±
- æ¨™é¡Œï¼šæ·±è‰²ç²—é«”
- å…§å®¹ï¼šç°è‰²èªªæ˜æ–‡å­—
- æŒ‰éˆ•ï¼šAmber ä¸»é¡Œè‰²ï¼ˆèˆ‡ç¶²ç«™ä¸€è‡´ï¼‰
- é€²åº¦ï¼šé¡¯ç¤ºã€Œ1/6ã€æ­¥é©ŸæŒ‡ç¤º

---

## Outcome

### âœ… å·²å®Œæˆ (ALL COMPLETED)

#### Phase 1: åŸºç¤å»ºè¨­
- âœ… æ›´æ–° `package.json` åŠ å…¥ Driver.js v1.3.1
- âœ… å»ºç«‹ Migration: `2026_01_01_000000_add_onboarding_completed_at_to_users_table.php`
- âœ… Migration åŸ·è¡ŒæˆåŠŸ

#### Phase 2: æ­¡è¿ Modal
- âœ… å»ºç«‹ `app/Livewire/OnboardingModal.php`
- âœ… å»ºç«‹ `resources/views/livewire/onboarding-modal.blade.php`
- âœ… å¯¦ä½œã€Œç¨å¾Œå†èªªã€æŒçºŒæé†’æ©Ÿåˆ¶ï¼ˆä¸æ›´æ–° `onboarding_completed_at`ï¼‰
- âœ… æ•´åˆåˆ° `dashboard.blade.php`

#### Phase 3-5: Driver.js å°è¦½
- âœ… å»ºç«‹ `resources/js/onboarding.js` å®Œæ•´é…ç½®
- âœ… Dashboard å°è¦½æ­¥é©Ÿ (Step 1-3)
- âœ… Charts å°è¦½æ­¥é©Ÿ (Step 4-6)
- âœ… è·¨é å°è¦½é‚è¼¯ï¼ˆlocalStorageï¼‰
- âœ… å®Œæˆè™•ç†é‚è¼¯ï¼ˆæ›´æ–° `onboarding_completed_at`ï¼‰
- âœ… åœ¨ `app.js` ä¸­å¼•å…¥æ¨¡çµ„
- âœ… npm install å®Œæˆ
- âœ… npm run build å®Œæˆ

#### Phase 6: ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•
- âœ… å»ºç«‹ `app/Http/Controllers/OnboardingController.php`
- âœ… åŠ å…¥è·¯ç”± (`onboarding.complete`, `onboarding.restart`)
- âœ… åœ¨ Navigation ä¸»å°è¦½åˆ—å’ŒéŸ¿æ‡‰å¼é¸å–®åŠ å…¥æŒ‰éˆ•
- âœ… å¯¦ä½œ 30 å¤©é¡¯ç¤ºé‚è¼¯
- âœ… ç‚ºé—œéµå…ƒç´ æ·»åŠ  ID

#### Phase 7: å¤šèªç³»
- âœ… åŠ å…¥è‹±æ–‡ç¿»è­¯ (`lang/en.json`)
- âœ… åŠ å…¥ç¹é«”ä¸­æ–‡ç¿»è­¯ (`lang/zh-TW.json`)
- âœ… **JS å¤šèªç³»æ”¯æ´**ï¼šä½¿ç”¨ `window.onboardingTranslations` æ³¨å…¥ç¿»è­¯

#### Phase 8: æ¸¬è©¦èˆ‡é™¤éŒ¯
- âœ… è§£æ±º Driver.js å¡ä½å•é¡Œ
- âœ… è§£æ±º API 404 å•é¡Œ
- âœ… è§£æ±ºç„¡é™å°è¦½å¾ªç’°å•é¡Œ
- âœ… **User Model**ï¼šåŠ å…¥ `$fillable` ç¢ºä¿è³‡æ–™åº«èƒ½æ›´æ–°
- âœ… **Charts IDs**ï¼šå·²ç‚º Charts é é¢å…ƒç´ æ·»åŠ  ID
- âœ… **UI å„ªåŒ–**ï¼šç§»é™¤ Mobile Menu ä¸­çš„ Log Out é¸é …

### ğŸ“ å¾…è¾¦äº‹é … (å·²å…¨éƒ¨å®Œæˆ)

#### ~~ç«‹å³éœ€è¦åŸ·è¡Œ~~ âœ… å·²å®Œæˆ
1. ~~**åŸ·è¡Œ Migration**~~ âœ… å·²å®Œæˆ
   ```
   INFO  Running migrations.
   2026_01_01_000000_add_onboarding_completed_at_to_users_table .. 12.17ms DONE
   ```

2. ~~**å®‰è£ npm ä¾è³´**~~ âœ… å·²å®Œæˆ
   ```
   added 1 package, and audited 233 packages in 2s
   ```

3. ~~**ç·¨è­¯å‰ç«¯è³‡æº**~~ âœ… å·²å®Œæˆ
   ```
   âœ“ built in 1.21s
   ```

#### Docker Compose è·¯å¾‘æ›´æ–°
- âœ… æ›´æ–° `laradock_setting.md`ï¼Œæ‰€æœ‰æŒ‡ä»¤ä½¿ç”¨ `/usr/local/bin/docker-compose`
- âœ… åŠ å…¥å‰ç«¯ç·¨è­¯ç›¸é—œæŒ‡ä»¤ç¯„ä¾‹

#### Charts é é¢éœ€è¦åŠ å…¥ ID
ç›®å‰ `onboarding.js` ä¸­å®šç¾©äº† Charts é é¢çš„å°è¦½æ­¥é©Ÿï¼Œä½† `charts/index.blade.php` å°šæœªåŠ å…¥å°æ‡‰çš„ IDï¼š
- `#chart-container`
- `#chart-type-selector`
- `#time-filter`

#### Phase 8: æ¸¬è©¦
- [x] æ–°ç”¨æˆ¶é¦–æ¬¡ç™»å…¥æµç¨‹æ¸¬è©¦
- [x] ã€Œç¨å¾Œå†èªªã€æŒçºŒæé†’æ¸¬è©¦
- [x] è·¨é å°è¦½æ¸¬è©¦
- [x] ã€Œé‡æ–°çœ‹æ•™å­¸ã€æŒ‰éˆ•é¡¯ç¤ºé‚è¼¯æ¸¬è©¦
- [x] å¤šèªç³»åˆ‡æ›æ¸¬è©¦
- [x] è¡Œå‹•è£ç½® RWD æ¸¬è©¦

---

## Lessons Learned

### 1. User Model Mass Assignment é™·é˜±
**å•é¡Œ**ï¼šå°è¦½å®Œæˆå¾Œï¼ŒModal ä¸€ç›´é‡æ–°å‡ºç¾ï¼Œå½¢æˆç„¡é™å¾ªç’°ã€‚
**åŸå› **ï¼š`onboarding_completed_at` æ²’æœ‰åŠ å…¥ `User` æ¨¡å‹çš„ `$fillable` å±¬æ€§ä¸­ï¼Œå°è‡´ `update()` æ–¹æ³•è¢« Laravel éœé»˜å¿½ç•¥ï¼Œè³‡æ–™åº«æ¬„ä½ä¸¦æœªæ›´æ–°ã€‚
**è§£æ³•**ï¼šå°‡ `onboarding_completed_at` åŠ å…¥ `$fillable` ä¸¦è¨­å®š `casts` ç‚º datetimeã€‚

### 2. JS API è·¯ç”±èˆ‡å¤šèªç³»å‰ç¶´ (404 Error)
**å•é¡Œ**ï¼š`fetch('/onboarding/complete')` ç™¼ç”Ÿ 404 éŒ¯èª¤ã€‚
**åŸå› **ï¼šå°ˆæ¡ˆä½¿ç”¨ `/{locale}/` è·¯ç”±å‰ç¶´ï¼ˆå¦‚ `/en/` æˆ– `/zh-TW/`ï¼‰ï¼ŒJS fetch åˆ°æ ¹ç›®éŒ„ `/` å°è‡´æ‰¾ä¸åˆ°è·¯ç”±ã€‚
**è§£æ³•**ï¼šåœ¨ `app.blade.php` ä¸­ä½¿ç”¨ `route()` è¼”åŠ©å‡½æ•¸ç”Ÿæˆå¸¶æœ‰ç•¶å‰ Locale çš„å®Œæ•´ URLï¼Œä¸¦æ³¨å…¥åˆ° `window.appRoutes` ä¾› JS ä½¿ç”¨ã€‚

### 3. Driver.js Popover å¤šèªç³»æ”¯æ´
**å•é¡Œ**ï¼šJS æª”æ¡ˆä¸­çš„èªªæ˜æ–‡å­—æ˜¯ç¡¬ç·¨ç¢¼çš„ï¼Œä¸å— Laravel Locale æ§åˆ¶ã€‚
**åŸå› **ï¼šJS æª”æ¡ˆç„¡æ³•ç›´æ¥ä½¿ç”¨ PHP çš„ `__()` å‡½æ•¸ã€‚
**è§£æ³•**ï¼šåœ¨ `app.blade.php` ä¸­å°‡ç¿»è­¯å¾Œçš„å­—ä¸²é™£åˆ—æ³¨å…¥åˆ° `window.onboardingTranslations`ï¼ŒJS è¼‰å…¥æ™‚è®€å–æ­¤è®Šæ•¸ã€‚

### 4. æ–°ç”¨æˆ¶ç©ºç‹€æ…‹å°è¦½å¡ä½
**å•é¡Œ**ï¼šæ–°ç”¨æˆ¶æ²’æœ‰å•¤é…’ç´€éŒ„æ™‚ï¼ŒDriver.js æ‰¾ä¸åˆ° `.beer-counter` å…ƒç´ å°è‡´å°è¦½ä¸­æ–·ã€‚
**è§£æ³•**ï¼šåœ¨ `startDashboardTour` ä¸­åŠ å…¥å‹•æ…‹æª¢æŸ¥é‚è¼¯ï¼Œè‹¥æ‰¾ä¸åˆ°å…ƒç´ å‰‡å¾æ­¥é©Ÿé™£åˆ—ä¸­ç§»é™¤è©²æ­¥é©Ÿï¼Œä¸¦èª¿æ•´å‰ä¸€æ­¥é©Ÿçš„èªªæ˜æ–‡å­—ã€‚

### 5. å¤šèªç³»ç¿»è­¯æª”æ¡ˆè·¯å¾‘é™·é˜±
**å•é¡Œ**ï¼šé›–ç„¶åœ¨ `lang/en.json` åŠ å…¥äº†ç¿»è­¯ï¼Œä½†å‰ç«¯é¡¯ç¤ºä»ç‚ºä¸­æ–‡ keyï¼Œä¸”æ¼¢å ¡é¸å–®ç¿»è­¯ä¹Ÿå¤±æ•ˆã€‚
**åŸå› **ï¼šå°ˆæ¡ˆåŒæ™‚å­˜åœ¨ `lang/` å’Œ `resources/lang/` ç›®éŒ„ã€‚åœ¨æŸäº› Laravel é…ç½®ä¸‹ï¼Œå¦‚æœ `resources/lang` å­˜åœ¨ï¼Œå¯èƒ½æœƒå„ªå…ˆè®€å–æˆ–åªè®€å–è©²ç›®éŒ„ï¼Œå°è‡´ `lang/en.json` è¢«å¿½ç•¥ã€‚
**è§£æ³•**ï¼šå°‡ JSON ç¿»è­¯æª”æ¡ˆåŒæ­¥è¤‡è£½åˆ° `resources/lang/en.json`ï¼Œä¸¦æ¸…é™¤è¦–åœ–å¿«å– (`php artisan view:clear`)ã€‚

---

## References

### Driver.js
- å®˜ç¶²ï¼šhttps://driverjs.com/
- GitHubï¼šhttps://github.com/kamranahmedse/driver.js
- æ–‡ä»¶ï¼šhttps://driverjs.com/docs/installation

### ç›¸é—œ Sessions
- `31-footer-rwd.md` - åŒæ—¥ Session
- `31-profile-ui-changes.md` - åŒæ—¥ Session

---

**Session å»ºç«‹æ™‚é–“**: 2025-12-31
**æœ€å¾Œæ›´æ–°**: 2025-12-31
